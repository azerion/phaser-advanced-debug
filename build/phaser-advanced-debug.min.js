/*!
 * phaser-advanced-debug - version 1.0.0 
 * Not so simple debug module for phaser
 *
 * Ale Bles <a.bles@orangegames.com>
 * Build at 13-02-2016
 * Released under MIT License 
 */

function listItemOpen(){return _cache[++_id]=this,new Handlebars.SafeString("<li "+(this.children&&this.children.length?'class="has-children" ':"")+'data-id="'+_id+'">')}function typeToString(){var a=this;if(void 0===a.type)return a instanceof Phaser.Stage?"Stage":"undefined"!=typeof PIXI.Stage&&a instanceof PIXI.Stage?"PIXI Stage":a instanceof PIXI.Sprite?"PIXI Sprite":a instanceof PIXI.DisplayObjectContainer?"PIXI DisplayObjectContainer":a instanceof PIXI.DisplayObject?"PIXI DisplayObject":"Unknown";switch(a.type){case Phaser.SPRITE:return"Sprite";case Phaser.BUTTON:return"Button";case Phaser.IMAGE:return"Image";case Phaser.GRAPHICS:return"Graphics";case Phaser.TEXT:return"Text";case Phaser.TILESPRITE:return"Tile Sprite";case Phaser.BITMAPTEXT:return"Bitmap Text";case Phaser.GROUP:return"Group";case Phaser.RENDERTEXTURE:return"Render Texture";case Phaser.TILEMAP:return"Tilemap";case Phaser.TILEMAPLAYER:return"Tilemap Layer";case Phaser.EMITTER:return"Emitter";case Phaser.POLYGON:return"Polygon";case Phaser.BITMAPDATA:return"Bitmap Data";case Phaser.CANVAS_FILTER:return"Canvas Filter";case Phaser.WEBGL_FILTER:return"WebGL Filter";case Phaser.ELLIPSE:return"Ellipse";case Phaser.SPRITEBATCH:return"Sprite Batch";case Phaser.RETROFONT:return"Retro Font";case Phaser.POINTER:return"Pointer";case Phaser.ROPE:return"Rope";default:return"Unknown"}}!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(1)["default"],f=c(2)["default"];b.__esModule=!0;var g=c(3),h=e(g),i=c(17),j=f(i),k=c(5),l=f(k),m=c(4),n=e(m),o=c(18),p=e(o),q=c(19),r=f(q),s=d();s.create=d,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.__esModule=!0},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(2)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(4),g=c(5),h=e(g),i=c(6),j=c(14),k=c(16),l=e(k),m="4.0.5";b.VERSION=m;var n=7;b.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.REVISION_CHANGES=o;var p="[object Object]";d.prototype={constructor:d,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;b.log=q,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return a||0===a?p(a)&&0===a.length?!0:!1:!0}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===n.call(a):!1};b.isArray=p},function(a,b){"use strict";function c(a,b){var e=b&&b.loc,f=void 0,g=void 0;e&&(f=e.start.line,g=e.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<d.length;i++)this[d[i]]=h[d[i]];Error.captureStackTrace&&Error.captureStackTrace(this,c),e&&(this.lineNumber=f,this.column=g)}b.__esModule=!0;var d=["description","fileName","lineNumber","message","name","number","stack"];c.prototype=new Error,b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}var e=c(2)["default"];b.__esModule=!0,b.registerDefaultHelpers=d;var f=c(7),g=e(f),h=c(8),i=e(h),j=c(9),k=e(j),l=c(10),m=e(l),n=c(11),o=e(n),p=c(12),q=e(p),r=c(13),s=e(r)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(4);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(2)["default"];b.__esModule=!0;var e=c(4),f=c(5),g=d(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;l>h;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(2)["default"];b.__esModule=!0;var e=c(5),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(4);b["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(4);b["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a)}var e=c(2)["default"];b.__esModule=!0,b.registerDefaultDecorators=d;var f=c(15),g=e(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(4);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(4),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;c>f;f++)d[f-1]=arguments[f]}}};b["default"]=e,a.exports=b["default"]},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(c>b){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=j(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!==f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=k(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new q["default"]("must pass block params");if(a.useDepths&&!g)throw new q["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return g&&b!==g[0]&&(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var d=void 0;if(c.fn&&c.fn!==i&&(c.data=r.createFrame(c.data),d=c.data["partial-block"]=c.fn,d.partials&&(c.partials=o.extend({},c.partials,d.partials))),void 0===a&&d&&(a=d),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}var l=c(1)["default"],m=c(2)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var n=c(4),o=l(n),p=c(5),q=m(p),r=c(3)},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())}])}),this.Fabrique=this.Fabrique||{},this.Fabrique.Debug=this.Fabrique.Debug||{},this.Fabrique.Debug["ts/Templates/details.hbs"]=Handlebars.template({1:function(a,b,c,d,e){var f;return"    <label>Children:</label>\n    <strong>"+a.escapeExpression(a.lambda(null!=(f=null!=b?b.children:b)?f.length:f,b))+"</strong>\n    <br/>\n"},3:function(a,b,c,d,e){var f;return"    <label>Texture:</label>\n"+(null!=(f=c["if"].call(null!=b?b:{},null!=(f=null!=(f=null!=(f=null!=b?b.texture:b)?f.baseTexture:f)?f.source:f)?f.src:f,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.program(6,e,0),data:e}))?f:"")+"    <br/>\n"},4:function(a,b,c,d,e){var f,g=a.lambda,h=a.escapeExpression;return'        <a href="'+h(g(null!=(f=null!=(f=null!=(f=null!=b?b.texture:b)?f.baseTexture:f)?f.source:f)?f.src:f,b))+'" target="_blank">'+h(g(null!=(f=null!=(f=null!=(f=null!=b?b.texture:b)?f.baseTexture:f)?f.source:f)?f.src:f,b))+"</a>\n"},6:function(a,b,c,d,e){var f;return"        <strong>"+a.escapeExpression(a.lambda(null!=(f=null!=(f=null!=b?b.texture:b)?f.baseTexture:f)?f.source:f,b))+"</strong>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function",k=a.escapeExpression,l=a.lambda;return"<br/><br/>\n\n<label>Name:</label>\n<strong>"+k((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g))+"</strong>\n<br/>\n\n<label>Type:</label>\n<strong>"+k((g=null!=(g=c.typeString||(null!=b?b.typeString:b))?g:i,typeof g===j?g.call(h,{name:"typeString",hash:{},data:e}):g))+"</strong>\n<br/>\n\n<label>Position:</label>\n<strong>"+k(l(null!=(f=null!=b?b.position:b)?f.x:f,b))+"</strong> x <strong>"+k(l(null!=(f=null!=b?b.position:b)?f.y:f,b))+"</strong>\n<br/>\n\n"+(null!=(f=c["if"].call(h,null!=b?b.children:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=c["if"].call(h,null!=b?b.texture:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")},useData:!0}),this.Fabrique.Debug["ts/Templates/panel.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<ul class="sidebar">\n</ul>\n\n<a href="#" class="refresh">refresh</a>\n<div class="details">\n</div>\n'},useData:!0}),this.Fabrique.Debug["ts/Templates/tree.hbs"]=Handlebars.template({1:function(a,b,c,d,e){var f;return'        <span class="weak">('+a.escapeExpression((f=null!=(f=c.name||(null!=b?b.name:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"name",hash:{},data:e}):f))+")</span>\n"},3:function(a,b,c,d,e){var f;return"        <ul>\n"+(null!=(f=c.each.call(null!=b?b:{},null!=b?b.children:b,{name:"each",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+"        </ul>\n"},4:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.sceneTree,b,{name:"sceneTree",data:e,indent:"                ",helpers:c,partials:d,decorators:a.decorators}))?f:""},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function",k=a.escapeExpression;return k((g=null!=(g=c.listItemOpen||(null!=b?b.listItemOpen:b))?g:i,typeof g===j?g.call(h,{name:"listItemOpen",hash:{},data:e}):g))+"\n    "+k((g=null!=(g=c.typeString||(null!=b?b.typeString:b))?g:i,typeof g===j?g.call(h,{name:"typeString",hash:{},data:e}):g))+"\n\n"+(null!=(f=c["if"].call(h,null!=b?b.name:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=c["if"].call(h,null!=b?b.children:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"</li>\n"},usePartial:!0,useData:!0});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Fabrique;!function(a){var b;!function(b){var c=function(b){function c(c,d){b.call(this,c,d),this.panels={performance:null,scene:null,bezier:null},this.tickTimings={lastStart:0,start:0,ms:0},this.timings={preUpdate:{physics:0,state:0,plugins:0,stage:0},update:{state:0,stage:0,tweens:0,sound:0,input:0,physics:0,particles:0,plugins:0},postUpdate:{stage:0,plugins:0},preRender:{state:0},render:{renderer:0,plugins:0,state:0},postRender:{plugins:0}},this.container=null,this.bar=null,this.stats={ms:null,fps:null,dpf:null,ent:null},this.timer=window.performance?window.performance:Date,this.panels.performance=new a.Debug.Performance(this.game,this),this.panels.bezier=new a.Debug.BezierTester(this.game,this),this.panels.scene=new a.Debug.SceneEditor(this.game,this),document.body.appendChild(this.createElement()),this.bindEvents();for(var e in this.timings)for(var f in this.timings[e])this.wrap(this.game,f,e,f);this.wrap(this,"game","update");for(var g in this.panels)this.panels[g].init&&this.panels[g].init.apply(this.panels[g],arguments)}return __extends(c,b),c.prototype.postUpdate=function(){for(var b in this.panels)this.panels[b].update&&this.panels[b].active&&this.panels[b].update();var c=Math.round(1e3/(this.tickTimings.start-this.tickTimings.lastStart)),d=this.game.renderer.renderSession.drawCount;c=c>60?60:c,a.Ui.setText(this.stats.dpf.firstElementChild,void 0===d?"(N/A)":d.toString()),a.Ui.setText(this.stats.ms.firstElementChild,Math.round(this.tickTimings.ms).toString()),a.Ui.setText(this.stats.fps.firstElementChild,Math.round(c).toString())},c.prototype.mark=function(a){this.panels.performance&&this.panels.performance.mark(a)},c.prototype.destroy=function(){Phaser.Plugin.prototype.destroy.call(this);for(var a in this.panels)this.panels[a].destroy();this.panels=null,this.tickTimings=null,this.timings=null,this.container=null,this.bar=null,this.stats=null,this.timer=null},c.prototype.wrap=function(a,b,c,d){a[b]&&a[b][c]&&(a[b][c]=function(a,b,c,d,e){var f=0,g=0;return"game"!==b||"update"!==c||d?function(){f=a.timer.now(),e.apply(this,arguments),g=a.timer.now(),a.timings[c][d]=g-f}:function(){f=a.timer.now(),a.tickTimings.lastStart=a.tickTimings.start,a.tickTimings.start=f,e.apply(this,arguments),g=a.timer.now(),a.tickTimings.ms=g-f}}(this,b,c,d,a[b][c]))},c.prototype.bindEvents=function(){var b,c=this;a.Ui.on(this.bar,"click",".pdebug-menu-item",function(d){d.preventDefault();var e=c.panels[d.target.getAttribute("href").replace("#","")];if(e){if(b&&(b.toggle(),a.Ui.removeClass(b.menuItem,"active"),b.name===e.name))return void(b=null);a.Ui.addClass(d.target,"active"),e.toggle(),b=e}})},c.prototype.createElement=function(){var b=this.container=document.createElement("div"),c=this.bar=document.createElement("div");a.Ui.addClass(b,"pdebug"),b.appendChild(c),a.Ui.addClass(c,"pdebug-menu"),c.appendChild(this.createMenuHead()),c.appendChild(this.createMenuStats());for(var d in this.panels)c.appendChild(this.panels[d].createMenuElement()),b.appendChild(this.panels[d].createPanelElement());return b},c.prototype.createMenuHead=function(){var b=document.createElement("span"),c=this.game.renderType,d=c===Phaser.WEBGL?"WebGL":c===Phaser.HEADLESS?"Headless":"Canvas";return a.Ui.addClass(b,"pdebug-head"),a.Ui.setText(b,"Phaser Debug ("+d+"):"),b},c.prototype.createMenuStats=function(){var b=document.createElement("div");return a.Ui.addClass(b,"pdebug-stats"),this.stats.ms=document.createElement("span"),this.stats.fps=document.createElement("span"),this.stats.dpf=document.createElement("span"),a.Ui.addClass(this.stats.ms,"pdebug-stats-item ms"),a.Ui.setHtml(this.stats.ms,"<span>0</span> ms"),b.appendChild(this.stats.ms),a.Ui.addClass(this.stats.fps,"pdebug-stats-item fps"),a.Ui.setHtml(this.stats.fps,"<span>0</span> fps"),b.appendChild(this.stats.fps),a.Ui.addClass(this.stats.dpf,"pdebug-stats-item dpf"),a.Ui.setHtml(this.stats.dpf,"<span>0</span> draws"),b.appendChild(this.stats.dpf),b},c}(Phaser.Plugin);b.Debug=c}(b=a.Plugins||(a.Plugins={}))}(Fabrique||(Fabrique={}));var Fabrique;!function(a){var b;!function(b){var c=function(){function b(a,b){this.name="",this.title="",this.active=!1,this.game=a,this.parent=b}return b.prototype.createPanelElement=function(){var b=this.panel=document.createElement("div");return a.Ui.addClass(b,"pdebug-panel "+this.name),b},b.prototype.createMenuElement=function(){var b=this.menuItem=document.createElement("a");return b.href="#"+this.name,a.Ui.addClass(b,"pdebug-menu-item "+this.name),a.Ui.setText(b,this.title),b},b.prototype.toggle=function(){this.active?this.hide():this.show()},b.prototype.show=function(){this.active=!0,a.Ui.setStyle(this.panel,"display","block")},b.prototype.hide=function(){this.active=!1,a.Ui.setStyle(this.panel,"display","none")},b.prototype.destroy=function(){this.game=null,this.parent=null,this.name=null,this.title=null,this.active=null,this.panel=null},b}();b.Panel=c}(b=a.Debug||(a.Debug={}))}(Fabrique||(Fabrique={}));var Fabrique;!function(a){var b;!function(b){var c=function(a){function c(b,c){a.call(this,b,c),this.name="bezier",this.title="Bezier Tester"}return __extends(c,a),c.prototype.createPanelElement=function(){var a=b.Panel.prototype.createPanelElement.call(this);return a},c.prototype.destroy=function(){a.prototype.destroy.call(this)},c}(a.Debug.Panel);b.BezierTester=c}(b=a.Debug||(a.Debug={}))}(Fabrique||(Fabrique={}));var Fabrique;!function(a){var b;!function(b){var c=function(a){function c(b,c){a.call(this,b,c),this.eventQueue=[],this.name="performance",this.title="Performance",this.eventQueue=[],this.graph=null,this.colorPalettes={"default":["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4","#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"]}}return __extends(c,a),c.prototype.createPanelElement=function(){var a=b.Panel.prototype.createPanelElement.call(this);return this.graph=new b.Graph(a,window.innerWidth-20,256,this.colorPalettes["default"]),a},c.prototype.update=function(){this.graph.addData(this.parent.timings,this.eventQueue.shift())},c.prototype.mark=function(a){this.eventQueue.push(a)},c.prototype.destro=function(){b.Panel.prototype.destroy.call(this),this.graph.destroy(),this.eventQueue=null,this.graph=null,this.colorPalettes=null},c}(a.Debug.Panel);b.Performance=c}(b=a.Debug||(a.Debug={}))}(Fabrique||(Fabrique={}));var detailsHtml=Fabrique.Debug["ts/Templates/details.hbs"],panelHtml=Fabrique.Debug["ts/Templates/panel.hbs"],treeHtml=Fabrique.Debug["ts/Templates/tree.hbs"];Handlebars.registerPartial("sceneDetails",detailsHtml),Handlebars.registerPartial("sceneTree",treeHtml),Handlebars.registerHelper("typeString",typeToString),Handlebars.registerHelper("listItemOpen",listItemOpen);var Fabrique;!function(a){var b;!function(b){var c=function(c){function d(a,b){var d=this;c.call(this,a,b),this.name="scene",this.title="Scene Editor",this.debugRenderer=new Phaser.Game(a.width,a.height,Phaser.CANVAS,"",{render:function(){return d.render()}},!0),this.debugRenderer.canvas.id="debug-render"}return __extends(d,c),d.prototype.createPanelElement=function(){return b.Panel.prototype.createPanelElement.call(this),this.panel.innerHTML=panelHtml(this.game.stage),this.tree=this.panel.querySelector(".sidebar"),this.details=this.panel.querySelector(".details"),this.refresh=this.panel.querySelector(".refresh"),a.Ui.on(this.tree,"click","li",this._onLiClick.bind(this)),a.Ui.on(this.refresh,"click","",this._onRefreshClick.bind(this)),this.panel},d.prototype.rebuildTree=function(){a.Ui.empty(this.tree),_cache={},this.tree.innerHTML=treeHtml(this.game.stage),this.select(this.tree.querySelector("li:first-child")),a.Ui.addClass(this.selected,"expanded"),this.reloadDetails()},d.prototype.reloadDetails=function(){var a=this.selected.dataset.id;this.details.innerHTML=detailsHtml(_cache[a]),this.debugItem=_cache[a]},d.prototype.render=function(){this.debugItem instanceof Phaser.Sprite&&(this.game.debug.spriteBounds(this.debugItem),this.game.debug.spriteInfo(this.debugItem,10,10))},d.prototype.select=function(b){this.selected&&a.Ui.removeClass(this.selected,"selected"),this.selected=b,a.Ui.addClass(this.selected,"selected")},d.prototype.show=function(){this.rebuildTree(),b.Panel.prototype.show.call(this)},d.prototype.destroy=function(){c.prototype.destroy.call(this),this.tree=null,this.details=null,this.refresh=null},d.prototype._onLiClick=function(b){b.stopPropagation(),this.select(b.delegateTarget),a.Ui.toggleClass(b.delegateTarget,"expanded"),this.reloadDetails()},d.prototype._onRefreshClick=function(a){a.preventDefault(),a.stopPropagation(),this.rebuildTree()},d}(a.Debug.Panel);b.SceneEditor=c}(b=a.Debug||(a.Debug={}))}(Fabrique||(Fabrique={}));var _cache={},_id=0,Fabrique;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){void 0===e&&(e={}),this.canvas=null,this.ctx=null,this.labelStyle=null,this.maxValue=null,this.padding=null,this.dataLineWidth=null,this.legendWidth=null,this.legendBoxSize=null,this.legendIndent=null,this.colors=null,this.dataCanvas=null,this.dctx=null,this.dataCanvasBuffer=null,this.bctx=null,this.canvas=document.createElement("canvas"),this.canvas.width=b,this.canvas.height=c,a.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.labelStyle="rgba(200, 200, 200, 0.6)",this.maxValue=e.maxValue||50,this.padding=e.labelPadding||5,this.dataLineWidth=e.lineWidth||1,this.legendWidth=230,this.legendBoxSize=10,this.legendIndent=5,this.eventY=2*this.padding,this.colors=d,this.dataCanvas=document.createElement("canvas"),this.dataCanvas.width=b-this.legendWidth,this.dataCanvas.height=c,this.dctx=this.dataCanvas.getContext("2d"),this.dataCanvasBuffer=document.createElement("canvas"),this.dataCanvasBuffer.width=this.dataCanvas.width-this.dataLineWidth,this.dataCanvasBuffer.height=this.dataCanvas.height,this.bctx=this.dataCanvasBuffer.getContext("2d")}return a.prototype.addData=function(a,b){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBg(),this.drawLegend(a),this.drawData(a,event)},a.prototype.drawBg=function(){var a=Math.floor(this.canvas.height-this.canvas.height*(16/this.maxValue))+.5,b=Math.floor(this.canvas.height-this.canvas.height*(33/this.maxValue))+.5;this.ctx.strokeStyle=this.ctx.fillStyle=this.labelStyle,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.legendWidth,a),this.ctx.lineTo(this.canvas.width,a),this.ctx.stroke(),this.ctx.fillText("16ms (60 fps)",this.legendWidth+this.padding,a-this.padding),this.ctx.beginPath(),this.ctx.moveTo(this.legendWidth,b),this.ctx.lineTo(this.canvas.width,b),this.ctx.stroke(),this.ctx.fillText("33ms (30 fps)",this.legendWidth+this.padding,b-this.padding),this.ctx.beginPath(),this.ctx.moveTo(this.legendWidth,this.canvas.height-.5),this.ctx.lineTo(this.canvas.width,this.canvas.height-.5),this.ctx.stroke()},a.prototype.drawLegend=function(a){var b=0,c=0,d=this.padding,e=0;for(var f in a){e=c*this.legendBoxSize+this.padding*(c+1)+this.padding,this.ctx.fillStyle=this.labelStyle,this.ctx.fillText(f,d,e),++c;for(var g in a[f])e=c*this.legendBoxSize+this.padding*c,this.ctx.fillStyle=this.colors[b++%this.colors.length],this.ctx.fillRect(d+this.legendIndent,e,this.legendBoxSize,this.legendBoxSize),this.ctx.fillStyle=this.labelStyle,this.ctx.fillText(Math.round(a[f][g])+"ms - "+g,d+this.legendIndent+this.legendBoxSize+this.padding,e+this.legendBoxSize),++c,c>16&&(d+=this.legendWidth/2,c=0)}},a.prototype.drawData=function(a,b){var c=this.dataCanvas.width-this.dataLineWidth+.5,d=this.dataCanvas.height-.5;this.bctx.clearRect(0,0,this.dataCanvasBuffer.width,this.dataCanvasBuffer.height),this.bctx.drawImage(this.dataCanvas,this.dataLineWidth,0,c,d,0,0,c,d),this.dctx.clearRect(0,0,this.dataCanvas.width,this.dataCanvas.height),this.dctx.drawImage(this.dataCanvasBuffer,0,0),b&&(this.dctx.beginPath(),this.dctx.strokeStyle=this.dctx.fillStyle="#ff0000",this.dctx.lineWidth=this.dataLineWidth,this.dctx.moveTo(c,d),this.dctx.lineTo(c,0),this.dctx.stroke(),this.dctx.textAlign="right",this.dctx.fillText(b,c-this.padding,this.eventY),this.eventY+=2*this.padding,this.eventY>this.dataCanvas.height/2&&(this.eventY=2*this.padding));var e=0,f=0;for(var g in a)for(var h in a[g])this.dctx.beginPath(),this.dctx.strokeStyle=this.dctx.fillStyle=this.colors[e++%this.colors.length],this.dctx.lineWidth=this.dataLineWidth,f=a[g][h]/this.maxValue*this.dataCanvas.height,f=0>f?0:f,this.dctx.moveTo(c,d),this.dctx.lineTo(c,d-=f),this.dctx.stroke();this.ctx.drawImage(this.dataCanvas,this.legendWidth,0)},a.prototype.destroy=function(){this.canvas=null,this.ctx=null,this.labelStyle=null,this.maxValue=null,this.padding=null,this.dataLineWidth=null,this.legendWidth=null,this.legendBoxSize=null,this.legendIndent=null,this.colors=null,this.dataCanvas=null,this.dctx=null,this.dataCanvasBuffer=null,this.bctx=null},a}();a.Graph=b}(b=a.Debug||(a.Debug={}))}(Fabrique||(Fabrique={}));var Fabrique;if(function(a){var b=function(){function a(){}return a.addClass=function(a,b){var c=a.className.split(" ");c.push(b),a.className=c.join(" ").trim()},a.setText=function(a,b,c){a.textContent=b},a.setStyle=function(a,b,c){if("string"==typeof b)a.style[b]=c;else for(var d in b)a.style[d]=b[d]},a.addCss=function(a){var b=document.createElement("style");b.type="text/css",b.sheet?b.sheet.href=a:b.appendChild(document.createTextNode(a)),document.head.appendChild(b)},a.delegate=function(a,b,c,d){a.addEventListener(b,function(a){var b=a.target;window.target=b,a.target&&b.matches(c)?(a.delegateTarget=b,d&&d(a)):b.parentElement&&b.parentElement.matches(c)&&(a.delegateTarget=b.parentElement,d&&d(a))})},a.on=function(b,c,d,e){return d?a.delegate(b,c,d,e):void b.addEventListener(c,e)},a.removeClass=function(a,b){var c=a.className.split(" "),d=c.indexOf(b);-1!==d&&(c.splice(d,1),a.className=c.join(" ").trim())},a.hasClass=function(a,b){return-1!==a.className.split(" ").indexOf(b)},a.toggleClass=function(b,c){a.hasClass(b,c)?a.removeClass(b,c):a.addClass(b,c);
},a.setHtml=function(a,b){a.innerHTML=b},a.empty=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},a.show=function(b){a.setStyle(b,"display","block")},a.hide=function(b){a.setStyle(b,"display","none")},a.clear=function(){var b=document.createElement("br");return a.setStyle(b,"clear","both"),b},a}();a.Ui=b}(Fabrique||(Fabrique={})),!HTMLElement.prototype.matches){var htmlprot=HTMLElement.prototype;htmlprot.matches=htmlprot.matches||htmlprot.webkitMatchesSelector||htmlprot.mozMatchesSelector||htmlprot.msMatchesSelector||htmlprot.oMatchesSelector||function(a){for(var b,c=this.parentElement.querySelectorAll(a),d=0;b=c[d++];)if(b===this)return!0;return!1}}